{"name":"Blueprint Random Projectile x1","permission":{"default":0,"066uQc4r4QbAEw6n":3,"61GFH5CnjdvBd9jj":3},"type":"script","folder":null,"sort":100001,"flags":{"core":{"sourceId":"Macro.8CSStDFwPkXZUdDy"}},"scope":"global","command":"/// This macro pulls from the JB2A list of Magic Missiles to throw 1 random path at targeted tokens\n\n//folder01 targets the Magic Missile Folder\nlet folder01 = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile/\";\n//Each file is then defined as a variable that will be stored in an array and then chose at random\nlet mmA = `${folder01}MagicMissile_01_Regular_Purple_30ft_01_1600x400.webm`;\nlet mmB = `${folder01}MagicMissile_01_Regular_Purple_30ft_02_1600x400.webm`;\nlet mmC = `${folder01}MagicMissile_01_Regular_Purple_30ft_03_1600x400.webm`;\nlet mmD = `${folder01}MagicMissile_01_Regular_Purple_30ft_04_1600x400.webm`;\nlet mmE = `${folder01}MagicMissile_01_Regular_Purple_30ft_05_1600x400.webm`;\nlet mmF = `${folder01}MagicMissile_01_Regular_Purple_30ft_06_1600x400.webm`;\nlet mmG = `${folder01}MagicMissile_01_Regular_Purple_30ft_07_1600x400.webm`;\nlet mmH = `${folder01}MagicMissile_01_Regular_Purple_30ft_08_1600x400.webm`;\nlet mmI = `${folder01}MagicMissile_01_Regular_Purple_30ft_09_1600x400.webm`;\n\nlet mmAA = `${folder01}MagicMissile_01_Regular_Purple_60ft_01_2800x400.webm`;\nlet mmBB = `${folder01}MagicMissile_01_Regular_Purple_60ft_02_2800x400.webm`;\nlet mmCC = `${folder01}MagicMissile_01_Regular_Purple_60ft_03_2800x400.webm`;\nlet mmDD = `${folder01}MagicMissile_01_Regular_Purple_60ft_04_2800x400.webm`;\nlet mmEE = `${folder01}MagicMissile_01_Regular_Purple_60ft_05_2800x400.webm`;\nlet mmFF = `${folder01}MagicMissile_01_Regular_Purple_60ft_06_2800x400.webm`;\nlet mmGG = `${folder01}MagicMissile_01_Regular_Purple_60ft_07_2800x400.webm`;\nlet mmHH = `${folder01}MagicMissile_01_Regular_Purple_60ft_08_2800x400.webm`;\nlet mmII = `${folder01}MagicMissile_01_Regular_Purple_60ft_09_2800x400.webm`;\n\n///Check if Module dependencies are installed or returns an error to the user\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nif(game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\nif(canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n\n\n\nfunction random_itemA(itemsA)\n{\nreturn itemsA[Math.floor(Math.random()*itemsA.length)];\n}\n\nvar itemsA = [mmA, mmB, mmC, mmD, mmE, mmF, mmG, mmH, mmI];\n\nfunction random_itemB(itemsB)\n{\nreturn itemsB[Math.floor(Math.random()*itemsB.length)];\n}\n\nvar itemsB = [mmAA, mmBB, mmCC, mmDD, mmEE, mmFF, mmGG, mmHH, mmII];\nconst wait = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\n\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\n\nlet ray = new Ray(myToken.center, mainTarget.center);\nlet anDeg = -(ray.angle * 57.3);\nlet anDist = ray.distance;\n\nlet anFile = random_itemA(itemsA);\nlet anFileSize = 1200;\nlet anchorX = 0.125;\nswitch(true){\n case (anDist<1800):\n    anFileSize = 1200;\n    anFile = random_itemA(itemsA);\n    anchorX = 0.125;\n    break;\n default:\n    anFileSize = 2400;\n    anFile = random_itemB(itemsB);\n    anchorX = 0.071;\n    break;\n}\n\n\n\nlet anScale = anDist / anFileSize;\nlet anScaleY = anScale;\nif (anDist<=600){anScaleY = 0.5}\nif (anDist>600 && anDist <1000){anScaleY = 0.66}\nif (anDist>=1000 && anDist <1800){anScaleY = anScale}\nif (anDist>=1800 && anDist <2400){anScaleY = 0.8}\nif (anDist>=2400){anScaleY = anScale}\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: myToken.center,\n                      anchor: {\n                       x: anchorX,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\nawait wait (80);\n\ngame.socket.emit('module.fxmaster', spellAnim);\nawait wait (50);\n}\n}\nCast()","author":"61GFH5CnjdvBd9jj","img":"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile/MagicMissile_01_Regular_Purple_Thumb.webp","actorIds":[],"_id":"PC3uCTzsvUUzFWsO"}
{"name":"Unarmed Strike (Monk)","permission":{"default":0,"0yf1okGudO16BpKj":3},"type":"script","sort":100001,"flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Unarmed Strike (Monk)\");","author":"0yf1okGudO16BpKj","img":"systems/dnd5e/icons/skills/ice_10.jpg","actorIds":[],"_id":"PzZJ6808meMVCE0u"}
{"name":"Glaive","permission":{"default":0,"0yf1okGudO16BpKj":3},"type":"script","sort":100001,"flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Glaive\");","author":"0yf1okGudO16BpKj","img":"systems/dnd5e/icons/items/weapons/glaive.png","actorIds":[],"_id":"zxks4qOSoRCD48JF"}
